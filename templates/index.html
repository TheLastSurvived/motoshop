{% extends 'base.html' %}
{% block title %}
Главная
{% endblock %}

{% block main %}
    <main>
      <!-- Улучшенный карусель с анимацией и затемнением -->
      <div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel" data-bs-interval="5000">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="carousel-image-wrapper">
              <img src="../static/img/slide1.jpg" class="d-block w-100" alt="Адреналин и свобода">
              <div class="carousel-overlay"></div>
            </div>
            <div class="container">
              <div class="carousel-caption text-start animate__animated animate__fadeInLeft">
                <h1 class="display-3 fw-bold">Адреналин и свобода!</h1>
                <p class="opacity-75 fs-5">
                  Подчеркивает эмоции и ощущения, которые испытывают мотоциклисты.
                </p>
                <p>
                  <a class="btn btn-lg btn-danger px-4 py-2 rounded-pill" href="/catalog"
                    >Посмотреть предложения</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="carousel-image-wrapper">
              <img src="../static/img/slide2.jpg" class="d-block w-100" alt="Свобода. Скорость. Драйв">
              <div class="carousel-overlay"></div>
            </div>
            <div class="container">
              <div class="carousel-caption animate__animated animate__fadeInDown">
                <h1 class="display-3 fw-bold">Свобода. Скорость. Драйв.</h1>
                <p class="fs-5">Кратко и емко передает основные ценности мотоциклистов.</p>
                <p>
                  <a class="btn btn-lg btn-danger px-4 py-2 rounded-pill" href="/catalog"
                    >Посмотреть предложения</a
                  >
                </p>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="carousel-image-wrapper">
              <img src="../static/img/slide3.jpg" class="d-block w-100" alt="Твой способ самовыражения">
              <div class="carousel-overlay"></div>
            </div>
            <div class="container">
              <div class="carousel-caption text-end animate__animated animate__fadeInRight">
                <h1 class="display-3 fw-bold">Твой способ самовыражения на дороге.</h1>
                <p class="fs-5">
                  Подходит для тех, кто видит в мотоцикле не просто средство
                  передвижения, а способ показать свою индивидуальность.
                </p>
                <p>
                  <a class="btn btn-lg btn-danger px-4 py-2 rounded-pill" href="/catalog"
                    >Посмотреть предложения</a
                  >
                </p>
              </div>
            </div>
          </div>
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#myCarousel"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#myCarousel"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <!-- Таймер с градиентным фоном -->
      <div class="bg-gradient py-5 bg-dark" >
        <div class="container text-center text-white py-4">
          <h1 class="display-5 mb-4">До закрытия мотосезона осталось:</h1>
          <div class="countdown-timer">
            <h2 id="timer" class="display-4 fw-bold text-danger"></h2>
          </div>
        </div>
      </div>

      <!-- Особенности с иконками и анимациями -->
      <div class="marketing py-5">
        <div class="container">
          <div class="row featurette align-items-center my-5 py-4">
            <div class="col-md-7 d-flex flex-column justify-content-center pe-5">
              <div class="feature-icon mb-4">
                <i class="bi bi-speedometer2 fs-1 text-danger"></i>
              </div>
              <h2 class="featurette-heading fw-bold mb-4">
                Свобода передвижения
              </h2>
              <p class="lead fs-5">
                Мотоцикл предоставляет уникальное чувство свободы. Вы можете легко
                перемещаться по городу, избегая пробок и задержек, а также
                отправляться в длительные путешествия по живописным маршрутам.
              </p>
            </div>
            <div class="col-md-5">
              <img src="../static/img/1.jpg" class="img-fluid rounded-4 shadow-lg" width="100%" alt="Свобода передвижения" />
            </div>
          </div>
        </div>

        <div class="bg-dark py-5">
          <div class="container">
            <div class="row featurette align-items-center my-5 py-4">
              <div class="col-md-5 order-md-1">
                <img src="../static/img/2.jpg" class="img-fluid rounded-4 shadow-lg" width="100%" alt="Экономия топлива" />
              </div>
              <div class="col-md-7 order-md-2 d-flex flex-column justify-content-center ps-5">
                <div class="feature-icon mb-4">
                  <i class="bi bi-fuel-pump fs-1 text-danger"></i>
                </div>
                <h2 class="featurette-heading fw-bold mb-4 text-white">Экономия топлива</h2>
                <p class="lead fs-5 text-white">
                  Мотоциклы, как правило, более экономичны, чем автомобили. Они
                  потребляют меньше топлива, что делает их более выгодным вариантом
                  для ежедневных поездок.
                </p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="container">
          <div class="row featurette align-items-center my-5 py-4">
            <div class="col-md-7 d-flex flex-column justify-content-center pe-5">
              <div class="feature-icon mb-4">
                <i class="bi bi-cash-coin fs-1 text-danger"></i>
              </div>
              <h2 class="featurette-heading fw-bold mb-4">
                Низкие эксплуатационные расходы
              </h2>
              <p class="lead fs-5">
                Обслуживание и страхование мотоцикла обычно обходятся дешевле, чем
                у автомобиля. Это позволяет сэкономить на расходах.
              </p>
            </div>
            <div class="col-md-5">
              <img src="../static/img/3.jpg" class="img-fluid rounded-4 shadow-lg" width="100%" alt="Низкие расходы" />
            </div>
          </div>
        </div>
      </div>

      <!-- Отзывы с карточками -->
      <div class="bg-dark py-5">
        <div class="container">
          <h2 class="text-center text-white mb-5 display-4 fw-bold">Отзывы наших клиентов</h2>
          <div class="row g-4">
            <div class="col-lg-4">
              <div class="card h-100 border-0 bg-transparent">
                <div class="card-body text-center p-4">
                  <div class="review-img mx-auto mb-4">
                    <img src="../static/img/review1.jpg" class="rounded-circle shadow" width="140" height="140" alt="Анастасия" />
                  </div>
                  <h3 class="fw-bold text-white">Анастасия</h3>
                  <div class="rating mb-3 text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                  </div>
                  <p class="text-white-50 fs-5">
                    "Мотоцикл был доставлен в срок, причем быстрее, чем ожидала!"
                  </p>
                </div>
              </div>
            </div>
            
            <div class="col-lg-4">
              <div class="card h-100 border-0 bg-transparent">
                <div class="card-body text-center p-4">
                  <div class="review-img mx-auto mb-4">
                    <img src="../static/img/review2.jpg" class="rounded-circle shadow" width="140" height="140" alt="Сергей" />
                  </div>
                  <h3 class="fw-bold text-white">Сергей</h3>
                  <div class="rating mb-3 text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-half"></i>
                  </div>
                  <p class="text-white-50 fs-5">
                    "Вежливое и внимательное отношение сотрудников, которые всегда
                    готовы ответить на вопросы и помочь с выбором."
                  </p>
                </div>
              </div>
            </div>
            
            <div class="col-lg-4">
              <div class="card h-100 border-0 bg-transparent">
                <div class="card-body text-center p-4">
                  <div class="review-img mx-auto mb-4">
                    <img src="../static/img/review3.jpg" class="rounded-circle shadow" width="140" height="140" alt="Максим" />
                  </div>
                  <h3 class="fw-bold text-white">Максим</h3>
                  <div class="rating mb-3 text-warning">
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                    <i class="bi bi-star-fill"></i>
                  </div>
                  <p class="text-white-50 fs-5">
                    "Хочу подчеркнуть профессионализм команды, которая работает честно
                    и четко."
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Популярные товары с ховер-эффектами -->
      <div class="container py-5">
        <h2 class="text-center mb-5 display-4 fw-bold">Популярные товары</h2>
        <div class="row g-4">
          {%for article in random_articles%}
          <div class="col-lg-3 col-md-6">
            <div class="card shadow-sm border-0 h-100 product-card">
              <a href="/article/{{article.id}}" class="product-image">
                <img src="../static/img/upload/{{article.image_name}}" class="card-img-top" alt="{{article.title}}" />
                <div class="product-overlay"></div>
              </a>
              <div class="card-body">
                <h5 class="card-title fw-bold">{{article.title}}</h5>
                <p class="text-muted"><small>{{article.category}}</small></p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <a href="/article/{{article.id}}" class="btn btn-sm btn-outline-danger rounded-pill px-3">
                      Подробнее
                    </a>
                  </div>
                  <span class="price fw-bold fs-5">{{article.price}} руб.</span>
                </div>
              </div>
            </div>
          </div>
          {%endfor%}
        </div>
        <div class="text-center mt-5">
          <a href="/catalog" class="btn btn-danger btn-lg px-4 py-2 rounded-pill">
            Смотреть все предложения <i class="bi bi-arrow-right ms-2"></i>
          </a>
        </div>
      </div>
    </main>
{% endblock %}

{% block script %}
<script>
  const targetDate = new Date("2025-10-01T00:00:00").getTime();

  function updateTimer() {
      const now = new Date().getTime();
      const distance = targetDate - now;

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      document.getElementById("timer").innerHTML = `
        <span class="countdown-box">${days}<small>дней</small></span>
        <span class="countdown-separator">:</span>
        <span class="countdown-box">${hours}<small>часов</small></span>
        <span class="countdown-separator">:</span>
        <span class="countdown-box">${minutes}<small>минут</small></span>
        <span class="countdown-separator">:</span>
        <span class="countdown-box">${seconds}<small>секунд</small></span>
      `;

      if (distance < 0) {
          clearInterval(x);
          document.getElementById("timer").innerHTML = "Мотосезон закрыт!";
      }
  }

  const x = setInterval(updateTimer, 1000);
</script>
{% endblock %}